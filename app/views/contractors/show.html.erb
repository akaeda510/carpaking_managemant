<main class="py-10 sm:px-6 lg:px-8 bg-gray-50 flex flex-col items-center">
  <div class="max-w-4xl w-full bg-white shadow-xl rounded-lg p-6 sm:p-8">

    <header class="pb-6 border-b border-gray-200 flex justify-between items-center">
      <div>
        <h1 class="text-3xl font-extrabold text-gray-900 flex items-center">
          👤 契約者詳細情報
        </h1>
        <p class="mt-2 text-sm text-gray-500">ご登録の情報を確認できます。</p>
      </div>

      <div class="flex space-x-3 mt-2 sm:mt-0">
        <%= link_to '📝 編集', edit_contractor_path(@contractor),
          class: "inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" %>

        <%= link_to '🗑️ 削除', contractor_path(@contractor),
          data: { turbo_method: :delete,
                  turbo_confirm: "契約者: #{@contractor.first_name} #{@contractor.last_name} を本当に削除しますか？\nこの操作は元に戻せません。"},
        class: "inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500" %>
      </div>
    </header>

    <div class="mt-8 divide-y divide-gray-200">

      <section class="py-4">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">基本情報</h2>
        <dl class="space-y-4">
          <%# 氏名 %>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 py-3 px-4 bg-gray-50 rounded-lg">
            <dt class="text-sm font-medium text-gray-500">氏名</dt>
            <dd class="text-sm text-gray-900 sm:col-span-2">
              <%= @contractor.full_name %>
            </dd>
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 py-3 px-4 bg-gray-50 rounded-lg">
            <dt class="text-sm font-medium text-gray-500">携帯電話番号 </dt>
            <dd class="text-sm text-gray-900 sm:col-span-2">
              <%= @contractor.phone_number %>
            </dd>
          </div>

          <% if @contractor.contact_number.present? %>
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 py-3 px-4 bg-white rounded-lg">
              <dt class="text-sm font-medium text-gray-500">電話番号 (任意)</dt>
              <dd class="text-sm text-gray-900 sm:col-span-2">
                <%= @contractor.contact_number.present? ? @contractor.contact_number : "未登録" %>
              </dd>
            </div>
          <% end %>

        </dl>
      </section>

      <hr class="my-6">

      <section class="py-4">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">🏠 住所情報</h2>
        <dl class="space-y-4">
          <%# 住所 %>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 py-3 px-4 bg-gray-50 rounded-lg">
            <dt class="text-sm font-medium text-gray-500">住所</dt>
            <dd class="text-sm text-gray-900 sm:col-span-2">
              <%= @contractor.address %>
            </dd>
          </div>

          <% if @contractor.building.present? %>
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 py-3 px-4 bg-white rounded-lg">
              <dt class="text-sm font-medium text-gray-500">建物名・部屋番号</dt>
              <dd class="text-sm text-gray-900 sm:col-span-2"><%= @contractor.building %></dd>
            </div>
          <% end %>
        </dl>
      </section>

      <section class="py-4">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">✍️ 備考</h2>
        <dl>
          <div class="py-3 px-4 bg-gray-50 rounded-lg">
            <dt class="text-sm font-medium text-gray-500 mb-2">特記事項・その他 (任意)</dt>
            <dd class="text-sm text-gray-900 whitespace-pre-wrap">
              <%= @contractor.notes.present? ? @contractor.notes : '---' %>
            </dd>
          </div>
        </dl>
      </section>
      <hr class="my-6">

      <%= render 'contract_history', contractor: @contractor %>
      <div class="mt-10 pt-6 flex justify-center space-x-4">
        <%= back_link_button "契約者一覧に戻る", contractors_path %>
      </div>
    </div>
</main>
